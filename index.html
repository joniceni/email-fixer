<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Email Fixer</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f8f8f8; color:#000; margin:0; padding:0; }
    .header { width:100%; background:#1976d2; padding:30px 0 20px; text-align:center; }
    .header img { max-width:200px; border:3px solid #fff; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,.4); display:block; margin:0 auto 15px; }
    .header h1 { color:#fff; font-size:32px; margin:0; font-weight:bold; }

    .container { max-width:700px; margin:30px auto; background:#fff; padding:30px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.2); }
    p { text-align:left; line-height:1.6; font-size:16px; }

    form { text-align:center; margin-top:20px; }
    textarea {
      width:90%; max-width:600px; padding:12px; font-size:16px;
      border:2px solid #1976d2; border-radius:6px; margin-bottom:15px; resize:vertical;
      box-shadow:0 3px 8px rgba(0,0,0,.15); transition: box-shadow .3s, border-color .3s;
    }
    textarea:hover { box-shadow:0 4px 12px rgba(25,118,210,.35); border-color:#0f4aa0; }
    textarea:focus { outline:none; box-shadow:0 4px 12px rgba(25,118,210,.45); border-color:#0f4aa0; }

    button {
      background:#1976d2; color:#fff; padding:12px 22px; border:none; border-radius:6px;
      cursor:pointer; font-size:16px; font-weight:bold; box-shadow:0 3px 8px rgba(0,0,0,.2);
      transition: background .3s, box-shadow .3s;
    }
    button:hover { background:#0f4aa0; box-shadow:0 5px 12px rgba(0,0,0,.3); }

    .signature { font-family:"Brush Script MT", cursive; font-size:22px; margin-top:20px; text-align:left; }

    .output-wrap { margin-top:22px; }
    .output-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
    .badge { background:#1976d2; color:#fff; font-weight:700; font-size:14px; padding:6px 10px; border-radius:14px; }
    .copy-btn {
      background:#fff; color:#000; border:2px solid #1976d2; font-weight:700;
      padding:6px 10px; border-radius:6px; cursor:pointer; transition: background .3s;
    }
    .copy-btn:hover { background:#f2f2f2; }
    .output-box {
      background:#fff; border:2px solid #1976d2; border-radius:6px; padding:14px;
      box-shadow:0 3px 8px rgba(0,0,0,.15); text-align:left; font-size:16px; line-height:1.5; white-space:pre-wrap;
    }
    .loader { display:none; margin-top:10px; color:#666; font-size:14px; }

    .footer { text-align:center; font-size:14px; color:#666; margin:20px 0; }
  </style>
</head>
<body>
  <div class="header">
    <img src="/static/framed-charles-blue.png" alt="Charles">
    <h1>Charles’ Email Fixer</h1>
  </div>

  <div class="container">
    <p><strong>Hi!</strong></p>

    <p>
      Emails can sometimes sound blunt, wordy or unclear. Paste your draft below and click
      <span style="color:#1976d2; font-weight:bold;">Fix My Email</span>.
      I’ll rewrite it to be polite, clear and concise while keeping your meaning.
    </p>

    <p>Use it as often as you like.</p>

    <p><em>TTFN</em></p>
    <div class="signature">Charles</div>

    <form method="POST" id="polisher-form">
      <textarea name="text_input" rows="6" placeholder="Paste your draft email here..."></textarea><br>
      <button id="submitBtn" type="submit">Fix My Email</button>
      <div id="loader" class="loader">Charles is thinking…</div>
    </form>

    {% if response_text %}
      <div class="output-wrap">
        <div class="output-head">
          <div class="badge">Fixed Email</div>
          <button class="copy-btn" type="button" id="copyBtn">Copy</button>
        </div>
        <div class="output-box" id="outBox">{{ response_text }}</div>
      </div>
    {% endif %}
  </div>

  <div class="footer">Powered by The Beacon</div>

  <script>
    const form = document.getElementById('polisher-form');
    const btn  = document.getElementById('submitBtn');
    const load = document.getElementById('loader');
    form?.addEventListener('submit', () => {
      btn.disabled = true; btn.textContent = 'Fixing…'; load.style.display = 'block';
    });

    const copyBtn = document.getElementById('copyBtn');
    copyBtn?.addEventListener('click', () => {
      const out = document.getElementById('outBox');
      if (!out) return;
      navigator.clipboard.writeText(out.innerText || out.textContent);
      copyBtn.textContent = 'Copied';
      setTimeout(() => (copyBtn.textContent = 'Copy'), 1200);
    });
  </script>
</body>
</html>
